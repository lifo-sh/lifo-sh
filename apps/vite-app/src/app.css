@import "tailwindcss";

/* ── Tokyo Night theme ── */
@theme {
  --color-tokyo-bg: #1a1b26;
  --color-tokyo-bg-dark: #16161e;
  --color-tokyo-fg: #a9b1d6;
  --color-tokyo-fg-bright: #c0caf5;
  --color-tokyo-border: #2f3146;
  --color-tokyo-comment: #565f89;
  --color-tokyo-blue: #7aa2f7;
  --color-tokyo-blue-bright: #89b4fa;
  --color-tokyo-purple: #bb9af7;
  --color-tokyo-green: #9ece6a;
  --color-tokyo-orange: #ff9e64;
  --color-tokyo-cyan: #89ddff;
  --color-tokyo-hover: #1e2030;
  --color-tokyo-active: #292e42;
  --color-tokyo-muted: #9aa5ce;

  --font-code: "Cascadia Code", "Fira Code", "JetBrains Mono", Menlo, monospace;
}

/* ── Base reset & body ── */
@layer base {
  *,
  *::before,
  *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html,
  body {
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: var(--color-tokyo-bg);
    color: var(--color-tokyo-fg);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  }
}

/* ── Components: syntax highlighting ── */
@layer components {
  .code-comment { color: var(--color-tokyo-comment); }
  .code-keyword { color: var(--color-tokyo-purple); }
  .code-string  { color: var(--color-tokyo-green); }
  .code-fn      { color: var(--color-tokyo-blue); }
  .code-const   { color: var(--color-tokyo-orange); }
  .code-punct   { color: var(--color-tokyo-cyan); }
}

/* ── Components: JS-toggled states ── */
@layer components {
  .sidebar-item.active {
    background: var(--color-tokyo-active);
    color: var(--color-tokyo-blue);
    font-weight: 500;
  }

  .output-panel {
    display: none;
    width: 100%;
    min-height: 0;
    flex: 1;
  }
  .output-panel.active {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .tab-btn.active {
    color: var(--color-tokyo-blue);
    background: var(--color-tokyo-bg);
    box-shadow: inset 0 -2px 0 var(--color-tokyo-blue);
  }

  .tab-panel {
    position: absolute;
    inset: 0;
    padding: 8px;
    display: none;
  }
  .tab-panel.active {
    display: block;
  }
}

/* ── Components: Chat UI ── */
@layer components {
  .chat-msg-user {
    align-self: flex-end;
    max-width: 80%;
    background: var(--color-tokyo-active);
    color: var(--color-tokyo-fg-bright);
    padding: 8px 12px;
    border-radius: 12px 12px 2px 12px;
    font-size: 12px;
    line-height: 1.5;
    white-space: pre-wrap;
    word-break: break-word;
  }

  .chat-msg-assistant {
    align-self: flex-start;
    max-width: 90%;
    color: var(--color-tokyo-fg);
    padding: 4px 0;
    font-size: 12px;
    line-height: 1.6;
    white-space: pre-wrap;
    word-break: break-word;
  }

  .chat-msg-assistant.streaming::after {
    content: "\2588";
    color: var(--color-tokyo-blue);
    animation: blink-cursor 0.8s step-end infinite;
  }

  @keyframes blink-cursor {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  .chat-tool-call {
    align-self: flex-start;
    max-width: 90%;
    border-left: 3px solid var(--color-tokyo-cyan);
    background: var(--color-tokyo-bg-dark);
    border-radius: 4px;
    padding: 6px 10px;
    font-size: 11px;
    line-height: 1.5;
    font-family: var(--font-code);
  }

  .chat-tool-call.executing {
    border-left-color: var(--color-tokyo-orange);
  }

  .chat-tool-call.completed {
    border-left-color: var(--color-tokyo-green);
  }

  .chat-tool-call .tool-name {
    font-weight: 600;
    color: var(--color-tokyo-cyan);
  }

  .chat-tool-call .tool-params {
    color: var(--color-tokyo-comment);
    white-space: pre-wrap;
    word-break: break-all;
    max-height: 60px;
    overflow: hidden;
  }

  .chat-tool-call .tool-result {
    color: var(--color-tokyo-muted);
    white-space: pre-wrap;
    word-break: break-all;
    max-height: 80px;
    overflow: hidden;
    margin-top: 4px;
    padding-top: 4px;
    border-top: 1px solid var(--color-tokyo-border);
  }

  .chat-token-pill {
    align-self: center;
    background: var(--color-tokyo-bg-dark);
    border: 1px solid var(--color-tokyo-border);
    border-radius: 9999px;
    padding: 2px 10px;
    font-size: 10px;
    color: var(--color-tokyo-comment);
    font-family: var(--font-code);
  }
}
